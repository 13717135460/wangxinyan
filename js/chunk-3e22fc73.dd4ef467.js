(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e22fc73"],{abd8:function(e,n,r){"use strict";r("f8b9")},b194:function(e,n,r){"use strict";r.r(n);var t=function(){var e=this;e._self._c;return e._m(0)},s=[function(){var e=this,n=e._self._c;return n("div",{staticClass:"case-box interceptor"},[n("h1",[e._v("vue拦截器")]),n("pre",[n("span",{staticStyle:{color:"#990030","font-weight":"bold"}},[e._v("// 请求拦截器")]),e._v("\nhttp.interceptors.request.use(\n  config => {\n    let token = session.get('token')\n    if (token) {\n      config.headers.Authorization = token  // 将token设置成请求头\n    }\n    if (config.responseType === 'blob') {\n      config.headers.responseType = 'blob' // 设置请求头类型\n    }\n    if (config.responseType === 'application/x-www-form-urlencoded') {\n      config.headers['Content-Type'] = 'application/x-www-form-urlencoded'\n    }\n    return config\n  },\n  error => {\n    return Promise.reject(error)\n  }\n)\n\n"),n("span",{staticStyle:{color:"#990030","font-weight":"bold"}},[e._v("// 响应拦截器")]),e._v("\nhttp.interceptors.response.use(\n  res => {\n    // 错误码统一拦截\n    let { status, msg } = res.data || res\n    if (status !== 0) {\n      Message.error(msg) // 需要引入ElementUI message组件\n    }\n    return res\n  },\n  error => {\n    if (error && error.response) {\n      let { status } = error.response.data\n      if (status === 400) { // 错误码拦截\n        Message.error('服务异常')\n      }\n      if (status === 404) {\n        Message.error('页面请求地址错误')\n      }\n      if (status === 500) {\n        Message.error('服务异常')\n      }\n      if (status === 'canceled') {\n        Message.error('服务异常')\n      }\n    }\n  \n    // 对响应错误做点什么\n    if(error.message.includes('timeout')){ // 判断请求异常信息中是否含有超时timeout字符串\n      Message.error('请求超时')\n    }\n    return Promise.reject(error)\n  }\n)\n")])])}],o={name:"interceptor",data:function(){return{}},methods:{}},i=o,a=(r("abd8"),r("2877")),c=Object(a["a"])(i,t,s,!1,null,"21f1cac6",null);n["default"]=c.exports},f8b9:function(e,n,r){}}]);
//# sourceMappingURL=chunk-3e22fc73.dd4ef467.js.map